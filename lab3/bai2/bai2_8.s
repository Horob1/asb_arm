    AREA RESET, DATA, READONLY
    DCD 0x20001000    
    DCD Reset_Handler   

    ALIGN              
BCNN 	DCD 0
SO1		DCD 7 
SO2		DCD 2 

    AREA MYSTACK, DATA, READWRITE
MY_STACK  DCD 0 

    AREA MYCODE, CODE, READONLY
    ENTRY
    EXPORT Reset_Handler

TIM_UCLN 	PROC
	LDR R3, =MY_STACK
	LDMIA R3, {R0,R1}
LOOP
	CMP R0, R1
	BGT HoanDoi
TiepTuc
	SUB R1, R0
	CMP R1, R0
	BEQ END_PROC
	B LOOP
HoanDoi
	MOV R2, R0
	MOV R0, R1
	MOV R1, R2
	B TiepTuc
END_PROC
	BX LR
	ENDP
	
TIM_BCNN	PROC
	LDR R3, =MY_STACK
	LDMIA R3, {R0,R1,R2}
	MUL R1, R1, R0
	SDIV R0, R1, R2 
	BX LR
	ENDP
	 
Reset_Handler 
	LDR R0, SO1
	LDR R1, SO2
	LDR R3, =MY_STACK
	STMIA R3, {R0,R1}
	BL TIM_UCLN
	MOV R2, R0
	LDR R0, SO1
	LDR R1, SO2
	STMIA R3, {R0,R1,R2}
	BL TIM_BCNN
	LDR R1, =BCNN
	STR R0, [R1]
STOP	
         B STOP
	 END 	