; bài này chua chu?n
  AREA RESET, DATA, READONLY
		DCD 0X20002000
		DCD MAIN
DULIEU	DCB "52"
LENGTH  DCD 2
	AREA MDATA, DATA, READWRITE
RESULT DCD 0
	AREA MSOURCE, CODE, READONLY
	ENTRY
CV_STRING_TO_NUM PROC 
  LDR R0, =DULIEU
  LDR R1, LENGTH
  MOV R4, #0
  MOV R3, #10
PROC_LOOP
  CMP R1, #0
  BEQ END_PROC
  LDRB R2, [R0], #1
  MUL R4, R4, R3
  SUB R2, #0x30
  ADD R4, R2
  SUB R1, #1
  B PROC_LOOP
END_PROC
  MOV R0, R4
  BX LR
  ENDP
MAIN
  BL CV_STRING_TO_NUM
	LDR R1, =RESULT
	ADD R1, #1000
LOOP	
  CMP R0, #0
  BEQ STOP
  MOV R5, #2
  MOV R4, #0
SUB_LOOP
  MOV R2, R0
  LSR R2, #1
  LSL R2, #1
  SUB R3, R0, R2
  CMP R3, #0
  LSL R4, #4
  BEQ NEXT_STEP 
  ADD R4, #0x1
NEXT_STEP 
  LSR R0, #1
  SUB R5 ,R5, #1
  CMP R5, #0
  BEQ SAVE_FOR_LOOP
  B SUB_LOOP
SAVE_FOR_LOOP
  ; dao bit do big indian
  
  CMP R4, #0x01
  BEQ SWAP_1
  CMP R4, #0x10
  BEQ SWAP_2
  B SAVE_TO
SWAP_1
  MOV R4, #0x10
  B SAVE_TO
SWAP_2
  MOV R4, #0x01
  B SAVE_TO
SAVE_TO
  STRB R4, [R1], #-1
  B LOOP

STOP B STOP
	END
	